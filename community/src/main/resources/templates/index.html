<!doctype html>
<html
  xmlns:th="http://www.thymeleaf.org"
  xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
>
  <head th:replace="~{fragments/layout :: head('Strona Główna')}"></head>
  <body>
    <nav th:replace="~{fragments/layout :: navigation}"></nav>

    <style>
      /* --- UKŁAD STRONY (Sticky Footer) --- */
      body {
        background-color: #f4f1ea !important;
        min-height: 100vh;
        display: flex;
        flex-direction: column;
      }
      .content-wrapper {
        flex: 1;
      }

      /* --- STYLE GOODREADS --- */
      .hero-title {
        font-family: "Georgia", serif;
        color: #382110;
        font-weight: bold;
      }
      .hero-card {
        background-color: #ffffff;
        border: 1px solid #d6d0c4;
        border-radius: 4px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
      }
      .btn-brown {
        background-color: #382110;
        color: #ffffff;
        border: 1px solid #382110;
        font-weight: 600;
        padding: 10px 25px;
        transition: all 0.3s;
      }
      .btn-brown:hover {
        background-color: #5a3b1c;
        border-color: #5a3b1c;
        color: #ffffff;
      }
      .btn-outline-brown {
        background-color: transparent;
        color: #382110;
        border: 1px solid #382110;
        font-weight: 600;
        padding: 10px 25px;
        transition: all 0.3s;
      }
      .btn-outline-brown:hover {
        background-color: #382110;
        color: #fff;
      }
      .feature-icon {
        color: #382110;
        font-size: 2rem;
        margin-bottom: 1rem;
      }
      .feature-title {
        font-family: "Georgia", serif;
        color: #382110;
        font-weight: bold;
      }

      /* Nowy styl dla okładek popularnych książek */
      .book-cover-container {
        height: 220px;
        background-color: #eee;
        overflow: hidden;
        border-bottom: 1px solid #f0f0f0;
      }
      .book-cover-img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        transition: transform 0.3s;
      }
      .book-card:hover .book-cover-img {
        transform: scale(1.05);
      }
      .book-link {
        color: #382110;
        text-decoration: none;
      }
      .book-link:hover {
        text-decoration: underline;
      }
    </style>

    <div class="container content-wrapper mt-5 mb-5">
      <div class="hero-card p-5 mb-5">
        <div class="row align-items-center">
          <div class="col-lg-7 text-center text-lg-start">
            <h1 class="display-4 hero-title mb-3">Witaj w Book Lovers!</h1>
            <p class="fs-5 text-muted mb-4">
              Twój osobisty świat literatury. Dołącz do społeczności, oceniaj
              przeczytane tytuły i stwórz swoją wirtualną biblioteczkę marzeń.
            </p>

            <div
              class="d-grid gap-2 d-sm-flex justify-content-sm-center justify-content-lg-start"
            >
              <a
                sec:authorize="!isAuthenticated()"
                href="/register"
                class="btn btn-brown btn-lg px-4 gap-3"
              >
                Załóż konto
              </a>

              <a
                sec:authorize="isAuthenticated()"
                href="/profile"
                class="btn btn-brown btn-lg px-4 gap-3"
              >
                <i class="fas fa-user me-2"></i>Twój Profil
              </a>

              <a href="/books" class="btn btn-outline-brown btn-lg px-4">
                Przeglądaj zbiory
              </a>
            </div>
          </div>

          <div class="col-lg-5 text-center mt-4 mt-lg-0">
            <i
              class="fas fa-book-open"
              style="font-size: 150px; color: #ebe8d5"
            ></i>
          </div>
        </div>
      </div>

      <div th:if="${popularBooks != null and !popularBooks.empty}" class="mb-5">
        <h3
          class="hero-title mb-4 pb-2 border-bottom"
          style="border-color: #d6d0c4 !important"
        >
          Najpopularniejsze w tym tygodniu
        </h3>

        <div class="row row-cols-2 row-cols-md-3 row-cols-lg-6 g-4">
          <div class="col" th:each="book : ${popularBooks}">
            <div
              class="card h-100 hero-card border-0 shadow-sm book-card overflow-hidden"
            >
              <div class="book-cover-container position-relative">
                <a th:href="@{'/books/' + ${book.id}}">
                  <img
                    th:if="${book.coverImage != null and !book.coverImage.empty}"
                    th:src="${book.coverImage}"
                    class="book-cover-img"
                    alt="Okładka"
                  />

                  <div
                    th:unless="${book.coverImage != null and !book.coverImage.empty}"
                    class="d-flex align-items-center justify-content-center h-100 text-muted"
                  >
                    <i class="fas fa-book fa-3x" style="color: #d6d0c4"></i>
                  </div>
                </a>
              </div>

              <div class="card-body p-3 text-center">
                <h6 class="card-title mb-1 text-truncate fw-bold">
                  <a
                    th:href="@{'/books/' + ${book.id}}"
                    class="book-link"
                    th:text="${book.title}"
                    >Tytuł</a
                  >
                </h6>
                <small
                  class="text-muted text-truncate d-block"
                  th:text="${book.author.firstName + ' ' + book.author.lastName}"
                  >Autor</small
                >
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="row g-4 py-3 row-cols-1 row-cols-lg-3 text-center">
        <div class="col">
          <div
            class="p-4 h-100 bg-white border rounded shadow-sm"
            style="border-color: #d6d0c4 !important"
          >
            <div class="feature-icon">
              <i class="fas fa-star"></i>
            </div>
            <h3 class="feature-title fs-4">Oceniaj i Recenzuj</h3>
            <p class="text-muted">
              Dziel się opiniami o przeczytanych książkach. Twoje recenzje
              pomagają innym znaleźć idealną lekturę.
            </p>
          </div>
        </div>

        <div class="col">
          <div
            class="p-4 h-100 bg-white border rounded shadow-sm"
            style="border-color: #d6d0c4 !important"
          >
            <div class="feature-icon">
              <i class="fas fa-layer-group"></i>
            </div>
            <h3 class="feature-title fs-4">Twoje Półki</h3>
            <p class="text-muted">
              Organizuj książki na wirtualnych półkach: "Przeczytane", "Chcę
              przeczytać" i "Teraz czytam".
            </p>
          </div>
        </div>

        <div class="col">
          <div
            class="p-4 h-100 bg-white border rounded shadow-sm"
            style="border-color: #d6d0c4 !important"
          >
            <div class="feature-icon">
              <i class="fas fa-users"></i>
            </div>
            <h3 class="feature-title fs-4">Społeczność</h3>
            <p class="text-muted">
              Dołącz do grupy pasjonatów czytania. Sprawdzaj co czytają inni i
              znajduj nowe inspiracje.
            </p>
          </div>
        </div>
      </div>
    </div>

    <footer th:replace="~{fragments/layout :: footer}"></footer>
  </body>
</html>
